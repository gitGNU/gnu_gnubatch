.\" Automatically generated by Pod::Man 2.25 (Pod::Simple 3.16)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "GBCH-JSTAT 1"
.TH GBCH-JSTAT 1 "2009-05-18" "GNUbatch Release 1" "GNUbatch Batch Scheduler"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
gbch\-jstat \- report job status as exit code
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBgbch-jstat\fR
[ \fI\-options\fR ]
jobnumber
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBgbch-jstat\fR is provided to enable shell scripts to determine the status
of a single job.
.PP
The jobs is specified by using the job number, as displayed by \fIgbch\-r\fR\|(1)
with the \fB\-v\fR (verbose) option, or as in the output of the first
column of the \fIgbch\-jlist\fR\|(1) command with default format.
.PP
A remote job should be specified by prefixing the job number with the
host name thus:
.PP
.Vb 1
\&        host:1234
.Ve
.PP
It is not necessary to include any leading zeroes.
.PP
By default, the job is checked to see if it is running, just starting
or just finishing, but by means of the \fB\-s\fR option, the user can
specify which states to test for.
.PP
\&\fBBtjstat\fR returns an exit code of 0 (true to shells) if the job is in
the given state, 1 if it is not, and some other exit code (and a
diagnostic) if some other error occurs, e.g. the job does not exist.
.SH "OPTIONS"
.IX Header "OPTIONS"
Note that the order of treatment, letters and keywords described below
may be modified by editing the file F<btrest.help> -
see btsyntax(5).
The environment variable on which options are supplied is \f(CW\*(C`BTJSTAT\*(C'\fR and the
environment variable to specify the help file is \f(CW\*(C`BTRESTCONF\*(C'\fR.
.IP "\-? or +explain" 4
.IX Item "-? or +explain"
Causes a summary of the other options to be displayed without taking
further action.
.IP "\-d or +default\-states" 4
.IX Item "-d or +default-states"
Cancel a \fB\-s\fR option and revert to checking whether the job is
running, just starting or just finishing.
.IP "\-s \fIstatecodes\fR or +state \fIstatecodes\fR" 4
.IX Item "-s statecodes or +state statecodes"
Specify \fIstatecodes\fR as the states to be tested for. \fIstatecodes\fR is
a comma-separated list of states exactly as reported by
\&\fIgbch\-jlist\fR\|(1). (The strings are read from the message file, and can be
altered if required). As distributed, they are
.RS 4
.IP "\fIempty string\fR" 4
.IX Item "empty string"
Ready to run, represented if necessary by two quotes, or an empty
field preceding a comma, as in
.Sp
.Vb 2
\&        gbch\-jstat \-s \*(Aq\*(Aq 1234
\&        gbch\-jstat \-s ,Done 1234
.Ve
.IP "Done" 4
.IX Item "Done"
Normal exit
.IP "Err" 4
.IX Item "Err"
Error exit
.IP "Abrt" 4
.IX Item "Abrt"
Aborted
.IP "Canc" 4
.IX Item "Canc"
Cancelled
.IP "Init" 4
.IX Item "Init"
Startup stage 1 (included in the default case)
.IP "Strt" 4
.IX Item "Strt"
Startup stage 2 (included in the default case)
.IP "Run" 4
.IX Item "Run"
Running (included in the default case)
.IP "Fin" 4
.IX Item "Fin"
Terminating (included in the default case)
.RE
.RS 4
.Sp
The state names are case insensitive. If one (typically the \*(L"ready to
run\*(R" state) is a null string, then this can be tested for by using a
null string or two consecutive commas, thus:
.Sp
.Vb 2
\&        \-s \*(Aq\*(Aq
\&        \-s ,canc
.Ve
.RE
.IP "+freeze\-current" 4
.IX Item "+freeze-current"
Save all the current options in a \fI.gnubatch\fR file in the current
directory.
.IP "+freeze\-home" 4
.IX Item "+freeze-home"
Save all the current options in a \fI.gnubatch\fR file in the user's home
directory.
.SH "EXAMPLE"
.IX Header "EXAMPLE"
The following shell script displays a list of the titles of jobs ready
to run or running
.PP
.Vb 10
\&        gbch\-jlist \-F \*(Aq%N %H\*(Aq|while read num title
\&        do
\&        if gbch\-jstat \-s \*(Aq\*(Aq $num
\&        then
\&                echo $title is ready to run
\&        elif gbch\-jstat $num
\&        then
\&                echo $title is running
\&        fi
\&        done
.Ve
.SH "FILES"
.IX Header "FILES"
\&\fI~/.gnubatch\fR
configuration file (home directory)
.PP
\&\fI.gnubatch\fR
configuration file (current directory)
.PP
\&\fI/usr/spool/progs/btrest.help\fR
message file
.SH "ENVIRONMENT"
.IX Header "ENVIRONMENT"
.IP "\s-1GBCH_JSTAT\s0" 4
.IX Item "GBCH_JSTAT"
space-separated options to override defaults.
.IP "\s-1BTRESTCONF\s0" 4
.IX Item "BTRESTCONF"
location of alternative help file.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIgbch\-jlist\fR\|(1),
\&\fIgbch\-jchange\fR\|(1),
\&\fIbtsyntax\fR\|(5),
\&\fIgnubatch.conf\fR\|(5),
\&\fIgnubach.hosts\fR\|(5).
.SH "DIAGNOSTICS"
.IX Header "DIAGNOSTICS"
Various diagnostics are read and printed as required from the message
file \fIbtrest.help\fR.
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (c) 2009 Free Software Foundation, Inc.
This is free software. You may redistribute copies of it under the
terms of the \s-1GNU\s0 General Public License
<http://www.gnu.org/licenses/gpl.html>.
There is \s-1NO\s0 \s-1WARRANTY\s0, to the extent permitted by law.
.SH "AUTHOR"
.IX Header "AUTHOR"
John M Collins, Xi Software Ltd.
